<mat-grid-list cols="2" rowHeight="6:1">
    <mat-grid-tile>
        <button matButton="outlined" (click)="adicionarCampo()">Adicionar campo</button>
    </mat-grid-tile>
    <mat-grid-tile>
        <button matButton="outlined" (click)="exibirJson()">Exibir JSON</button>
    </mat-grid-tile>
</mat-grid-list>

<form [formGroup]="forms">
    <div formArrayName="items">
    @for (group of items?.controls; track $index) {
        <mat-expansion-panel [formGroupName]="$index" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title></mat-panel-title>
                <mat-panel-description></mat-panel-description>
            </mat-expansion-panel-header>
            <p>
                <mat-grid-list cols="4">
                    <mat-grid-tile>
                        <mat-form-field class="example-full-width">
                            <mat-label>Nome</mat-label>
                            <input matInput formControlName="name">
                        </mat-form-field>
                    </mat-grid-tile>
                    <mat-grid-tile>
                        <mat-form-field class="example-full-width">
                            <mat-label>Label</mat-label>
                            <input matInput formControlName="label">
                        </mat-form-field>
                    </mat-grid-tile>
                    <mat-grid-tile>
                        <mat-form-field>
                            <mat-label>Tipo de campo</mat-label>
                            <mat-select formControlName="type">
                                <mat-option [value]="1">Texto</mat-option>
                                <mat-option [value]="2">NÃºmero</mat-option>
                            </mat-select>
                            </mat-form-field>
                    </mat-grid-tile>
                </mat-grid-list>
            </p>
            </mat-expansion-panel>
    }
    </div>
</form>